import{r as d,o as _,c as w,a as o,b as i,w as p,u as v,G as b,I as g,F as f,A as V,B as y}from"./vendor--BJOIQwQ.js";import{_ as x}from"./_plugin-vue_export-helper-x3n3nnut.js";const P={data(){return{waiting:!1,show:!1,rows:[],stations:[],mills:[],row:{id:null,mill_id:null,parameter:null,std_value:0},headers:[{text:"Mill",value:"mill.mill_name"},{text:"Station",value:"product_name"},{text:"Parameter",value:"parameter"},{text:"Value",value:"std_value"},{text:"",value:"options"}],params:{mill_id:null,page:1,rowsPerPage:15,sortBy:"product_name",sortType:"asc"},total:0}},mounted(){this.loadData(),this.getMills()},watch:{params:{handler(t,s){this.params.page=t.page,this.params.rowsPerPage=t.rowsPerPage,this.params.sortBy=t.sortBy,this.params.sortType=t.sortType,this.params.mill_id=s.mill_id,this.loadData()},deep:!0}},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(t=>t.data.data)},async loadProducts(){this.row.hasOwnProperty("mill_id")&&(this.stations=await this.$http.get(`/std/oil/products/${this.row.mill_id}`).then(t=>t.data.data))},async loadData(){this.waiting=!0;let t=await this.$http.get("/std/oil/losses",{params:this.params}).then(s=>s.data);this.params.rowsPerPage=t.meta.per_page,this.params.page=t.meta.current_page,this.total=t.meta.total,this.rows=t.data,this.waiting=!1},edit(t){this.row=t,this.show=!0},del(t){if(confirm("Your sure!")==!0){this.$http.delete(`/std/oil/losses/${t.id}`);let s=this.rows.findIndex(m=>m.id===t.id);this.rows.splice(s,1)}},showRow(t){console.log(t)},async save(){this.row=await this.$http.post("/std/oil/losses",this.row).then(t=>t.data.data),await this.loadData(),this.show=!1}}},n=t=>(V("data-v-9e371d5b"),t=t(),y(),t),C={class:"master-table mt-3"},k={class:"row"},S={class:"col-4"},D={class:"mb-3"},M=n(()=>o("label",{class:"form-label"},"Mill",-1)),O={class:"col-8"},B={class:"mb-3 d-flex justify-content-end align-items-end"},T={class:"table"},U=["onClick"],I=["onClick"],E={class:"form-setting"},N={class:"mb-3"},R=n(()=>o("label",{class:"form-label"},"Mill",-1)),j={class:"mb-3"},A=n(()=>o("label",{class:"form-label"},"Station",-1)),F={class:"mb-3"},G=n(()=>o("label",{class:"form-label"},"Parameter",-1)),W={class:"mb-3"},Y=n(()=>o("label",{class:"form-label"},"Parameter",-1)),q={class:"mb-3 d-flex justify-content-end"};function z(t,s,m,H,l,a){const r=d("v-select"),u=d("EasyDataTable"),c=d("com-modal");return _(),w(f,null,[o("div",C,[o("div",k,[o("div",S,[o("div",D,[M,i(r,{label:"mill_name",class:"w-100",modelValue:l.params.mill_id,"onUpdate:modelValue":s[0]||(s[0]=e=>l.params.mill_id=e),reduce:e=>e.id,options:l.mills},null,8,["modelValue","reduce","options"])])]),o("div",O,[o("div",B,[o("button",{class:"btn btn-primary",onClick:s[1]||(s[1]=e=>l.show=!0)},"Create New Standart")])])]),o("div",T,[i(u,{"server-options":l.params,"onUpdate:serverOptions":s[2]||(s[2]=e=>l.params=e),"server-items-length":l.total,loading:l.waiting,headers:l.headers,items:l.rows,onClickRow:a.showRow,"rows-items":[15,25,50,100],"show-index":""},{"item-options":p(e=>[o("a",{class:"pointer",onClick:h=>a.edit(e)},"Edit",8,U),v(" | "),o("a",{class:"pointer",onClick:h=>a.del(e)},"Del",8,I)]),_:1},8,["server-options","server-items-length","loading","headers","items","onClickRow"])])]),i(c,{modelValue:l.show,"onUpdate:modelValue":s[12]||(s[12]=e=>l.show=e),header:"Add/Edit Oil Standart Settings",closeable:""},{default:p(()=>[o("div",E,[o("div",N,[R,i(r,{label:"mill_name",modelValue:l.row.mill_id,"onUpdate:modelValue":s[3]||(s[3]=e=>l.row.mill_id=e),class:"w-100",options:l.mills,reduce:e=>e.id,"onOption:selected":s[4]||(s[4]=e=>a.loadProducts())},null,8,["modelValue","options","reduce"])]),o("div",j,[A,i(r,{class:"w-100",taggable:"",label:"product_name",modelValue:l.row.product_name,"onUpdate:modelValue":s[5]||(s[5]=e=>l.row.product_name=e),options:l.stations,"onOption:selected":s[6]||(s[6]=e=>l.row.product_name=e)},null,8,["modelValue","options"])]),o("div",F,[G,i(r,{class:"w-100",taggable:"",modelValue:l.row.parameter,"onUpdate:modelValue":s[7]||(s[7]=e=>l.row.parameter=e),options:["Oil/WM","VM","Oil/DM","NOS"],"onOption:selected":s[8]||(s[8]=e=>l.row.parameter=e)},null,8,["modelValue"])]),o("div",W,[Y,b(o("input",{class:"form-control",type:"number",step:"0.01","onUpdate:modelValue":s[9]||(s[9]=e=>l.row.std_value=e)},null,512),[[g,l.row.std_value]])]),o("div",q,[o("button",{onClick:s[10]||(s[10]=e=>l.show=!1),class:"btn btn btn-outline-secondary mr2"},"Cancel"),o("button",{onClick:s[11]||(s[11]=(...e)=>a.save&&a.save(...e)),class:"btn btn-success"},"Save")])])]),_:1},8,["modelValue"])],64)}const L=x(P,[["render",z],["__scopeId","data-v-9e371d5b"]]);export{L as default};
