import{o as r,g as i,h as s,F as m,A as f,t as a,q as v,j as u,w as x,P as h,Q as c,r as p}from"./vendor-2n24ytFz.js";import{_ as g}from"./_plugin-vue_export-helper-x3n3nnut.js";const V={props:{url:String,sensorUrl:String},data(){return{show:!1,row:{sensor_name:null,min:null,max:null},rows:[],sensors:[],params:{}}},async mounted(){this.getData(),this.sensors=await this.$http.get(this.sensorUrl).then(l=>l.data.data)},methods:{async getData(){this.rows=await this.$http.get(this.url,{params:this.params}).then(l=>l.data.data)},edit(l){this.row=l,this.show=!0},del(l){if(confirm("Your sure!")==!0){this.$http.delete(`/threshold/${l.id}`);let e=this.rows.findIndex(d=>d.id===l.id);this.rows.splice(e,1)}},async save(){this.row=await this.$http.post(this.url,this.row).then(l=>l.data.data),await this.getData(),this.show=!1}}},k={class:"threshold-setting container mt-4"},y={class:"table table-sm table-striped table-hover"},C=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Sensor Name"),s("th",null,"MIN"),s("th",null,"MAX"),s("th")])],-1),N=["onClick"],D=["onClick"],S={class:"form-setting"},U={class:"mb-3"},A=s("label",{class:"form-label"},"Sensor Name",-1),M={class:"mb-3"},T=s("label",{class:"form-label"},"MIN",-1),B={class:"mb-3"},E=s("label",{class:"form-label"},"MAX",-1),I={class:"mb-3 d-flex justify-content-end"};function j(l,e,d,F,o,n){const _=p("v-select"),w=p("com-modal");return r(),i(m,null,[s("div",k,[s("button",{class:"btn btn-success float-end",onClick:e[0]||(e[0]=t=>o.show=!0)},"Add New Threshold"),s("table",y,[C,s("tbody",null,[(r(!0),i(m,null,f(o.rows,t=>(r(),i("tr",{key:t.id},[s("td",null,a(t.id),1),s("td",null,a(t.sensor_name),1),s("td",null,a(t.min),1),s("td",null,a(t.max),1),s("td",null,[s("a",{class:"pointer",onClick:b=>n.edit(t)},"Edit",8,N),v(" | "),s("a",{class:"pointer",onClick:b=>n.del(t)},"Del",8,D)])]))),128))])])]),u(w,{modelValue:o.show,"onUpdate:modelValue":e[6]||(e[6]=t=>o.show=t),header:"Add/Edit Threshold",closeable:""},{default:x(()=>[s("div",S,[s("div",U,[A,u(_,{class:"w-100",modelValue:o.row.sensor_name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.row.sensor_name=t),options:o.sensors},null,8,["modelValue","options"])]),s("div",M,[T,h(s("input",{class:"form-control",type:"number","onUpdate:modelValue":e[2]||(e[2]=t=>o.row.min=t)},null,512),[[c,o.row.min]])]),s("div",B,[E,h(s("input",{class:"form-control",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>o.row.max=t)},null,512),[[c,o.row.max]])]),s("div",I,[s("button",{onClick:e[4]||(e[4]=t=>o.show=!1),class:"btn btn btn-outline-secondary mr2"},"Cancel"),s("button",{onClick:e[5]||(e[5]=(...t)=>n.save&&n.save(...t)),class:"btn btn-success"},"Save")])])]),_:1},8,["modelValue"])],64)}const L=g(V,[["render",j]]);export{L as default};
