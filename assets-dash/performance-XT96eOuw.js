import _ from"./News-6EbozxZA.js";import{r as p,o as n,c as d,a as s,F as v,E as b,n as c,v as u,b as a}from"./vendor--BJOIQwQ.js";import{_ as f}from"./_plugin-vue_export-helper-x3n3nnut.js";const g={components:{News:_},data(){return{mills:[],params:{mill_id:12,type:"today"},scores:null,values:[],fosnir:0,score:0}},async mounted(){this.getMills(),this.loadData(),this.fosnirScore(),await setInterval(()=>{this.loadData(),this.fosnirScore()},5e3)},methods:{async loadData(){this.values={3:0,4:0,5:0},this.scores=await this.$http.get("/mill/performance",{params:this.params}).then(o=>o.data.data),this.scores.forEach(o=>{let t=o.scount>0?o.stotal/o.scount:0;this.values[o.device_id]=parseInt(t)}),this.getTotalScore()},async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(t=>t.data.data);let o=[];this.mills.forEach(t=>{o.push({id:t.id,mill:t.mill_name,score:0})}),this.$root.scores=o},async fosnirScore(){this.fosnir=0;let o=await this.$http.get("/fossnir/score-mill",{params:this.params}).then(t=>t.data.data.score);this.fosnir=parseInt(o),this.getTotalScore()},getTotalScore(){let t=(this.values[3]+this.values[4]+this.values[5]+this.fosnir)/4;this.$root.score=t;let r=this.$root.scores.findIndex(m=>m.id==this.params.mill_id);return r&&(this.$root.scores[r].score=t),t}},computed:{},watch:{params:{handler(o,t){this.loadData()},deep:!0}}},y={class:"mt-3"},S={class:"row g-0"},T=["onClick","disabled"],E={class:"col-1 d-grid gap-1 p-1"},I={class:"col-1 d-grid gap-1 p-1"},R={class:"col-1 d-grid gap-1 p-1"},k={class:"row g-2",style:{"margin-top":"3rem"}},w={class:"col-2 mb-4"},C={class:"col-2 mb-4"},D={class:"col-2 mb-4"},x={class:"col-2 d-grid gap-2 mb-4"},L={class:"col-2 mb-4"},N={class:"col-2 mb-4"},O={class:"col-2 mb-4"},A={class:"col-2 mb-4"},B={class:"col-2 mb-4"},F={class:"col-2 mb-4"},M={class:"col-2 mb-4"},P={class:"row",style:{"margin-top":"6rem"}},K={class:"col"};function V(o,t,r,m,e,Y){const l=p("com-score-card"),h=p("news");return n(),d("div",y,[s("div",S,[(n(!0),d(v,null,b(e.mills,i=>(n(),d("div",{class:"col-1 d-grid gap-1 p-1",key:i.id},[s("button",{onClick:G=>e.params.mill_id=i.id,class:c(["btn txt-sm btn-primary btn-block",{active:e.params.mill_id==i.id}]),disabled:i.id!==12},u(i.mill_name),11,T)]))),128)),s("div",E,[s("button",{onClick:t[0]||(t[0]=i=>e.params.type="today"),class:c(["btn txt-sm btn-primary btn-block",{active:e.params.type=="today"}])},"TODAY",2)]),s("div",I,[s("button",{onClick:t[1]||(t[1]=i=>e.params.type="month"),class:c(["btn txt-sm btn-primary btn-block",{active:e.params.type=="month"}])},"MTD",2)]),s("div",R,[s("button",{onClick:t[2]||(t[2]=i=>e.params.type="year"),class:c(["btn txt-sm btn-primary btn-block",{active:e.params.type=="year"}])},"YTD",2)])]),s("div",k,[s("div",w,[a(l,{name:"ST. LOADING RAMP",score:null,disabled:""})]),s("div",C,[a(l,{name:"ST. STERILLIZER",score:null,disabled:""})]),s("div",D,[a(l,{name:"ST. TRESHER",score:null,disabled:""})]),s("div",x,[a(l,{name:"ST. PRESS",score:e.values[4]},null,8,["score"])]),s("div",L,[a(l,{name:"ST. NUT KERNEL",score:e.values[5]},null,8,["score"])]),s("div",N,[a(l,{name:"ST. KLARIFIKASI",score:e.values[3]},null,8,["score"])]),s("div",O,[a(l,{name:"ST. OIL RECOVERY",score:null,disabled:""})]),s("div",A,[a(l,{name:"GENSET",score:null,disabled:""})]),s("div",B,[a(l,{name:"BOILER",score:null,disabled:""})]),s("div",F,[a(l,{name:"WTP",score:null,disabled:""})]),s("div",M,[a(l,{name:"FOSNIR SCORE",score:e.fosnir},null,8,["score"])])]),s("div",P,[s("div",K,[a(h,{params:e.params},null,8,["params"])])])])}const W=f(g,[["render",V],["__scopeId","data-v-e29ccaf6"]]);export{W as default};
