import{r as b,o as l,c as a,a as t,b as p,F as c,E as h,t as d,n as v,u,y as x,z as f}from"./vendor-_TY6xysw.js";import{_ as S}from"./_plugin-vue_export-helper-x3n3nnut.js";const V={data(){return{mills:[],parameter:{label:"Oil/WM",value:"owm"},params:{mill_id:999,parameter:"owm",date:new Date().toISOString().slice(0,10),group_id:4},rows:[],max:15,stations:[],parameters:[{label:"Oil/WM",value:"owm"},{label:"VM",value:"vm"},{label:"Oil/DM",value:"odm"},{label:"NOS",value:"nos"}],loading:!1}},mounted(){this.getStations(),this.loadData(),this.getMills()},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(n=>n.data.data)},async getStations(){this.stations=await this.$http.get("/fossnir/stations").then(n=>n.data.data)},changeDate(n){this.params.date=n.toISOString().slice(0,10),this.$root.date=n.toISOString().slice(0,10),this.loadData()},selected(n){this.parameter=n,this.loadData()},async loadData(){if(this.loading=!0,this.params.lenght<2)return;let n=await this.$http.get("/fossnir/data",{params:this.params}).then(i=>i.data);this.rows=n.data,n.meta&&(this.max=n.meta.max),this.loading=!1}}},r=n=>(x("data-v-c410e138"),n=n(),f(),n),k={class:"mt-3"},D={class:"row"},O={class:"col-3"},I={class:"mb-3"},M=r(()=>t("label",{class:"form-label"},"Mill",-1)),F={class:"col-3"},w={class:"mb-3"},N=r(()=>t("label",{class:"form-label"},"OIL IN",-1)),T={class:"col-3"},L={class:"mb-3"},U=r(()=>t("label",{class:"form-label"},"Date",-1)),E={class:"col-3"},P={class:"mb-3"},B=r(()=>t("label",{class:"form-label"},"Parameters",-1)),C={class:"row"},z={class:"col"},A={key:0,class:"table table-sm history"},W=r(()=>t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"MILL"),t("th",null,"STD"),t("th",{class:"c-val"},"07:00"),t("th",{class:"c-val"},"09:00"),t("th",{class:"c-val"},"11:00"),t("th",{class:"c-val"},"13:00"),t("th",{class:"c-val"},"15:00"),t("th",{class:"c-val"},"17:00"),t("th",{class:"c-val"},"19:00"),t("th",{class:"c-val"},"21:00"),t("th",{class:"c-val"},"23:00"),t("th",{class:"c-val"},"01:00"),t("th",{class:"c-val"},"03:00"),t("th",{class:"c-val"},"05:00"),t("th",null,"Sample"),t("th",null,"Today")])],-1)),H={key:0},j={key:1},q=r(()=>t("tr",null,[t("td",{colspan:"17",style:{height:"400px"}},[t("div",{class:"text-center"},[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])])],-1)),G=[q],J={key:1,class:"table table-sm history"},K=r(()=>t("th",null,"No",-1)),Q=r(()=>t("th",{class:"station"},"STATION",-1)),R=r(()=>t("th",null,"STD",-1)),X=["colspan"],Y=r(()=>t("th",null,"Total Sample",-1)),Z={key:0},$=["colspan"],tt=r(()=>t("div",{class:"text-center"},[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)),et=[tt],st={key:1},lt={rowspan:"2"},at={rowspan:"2",class:"txt-left"},ot={rowspan:"2"};function nt(n,i,dt,it,s,m){const g=b("v-select"),y=b("VueDatePicker");return l(),a("div",k,[t("div",D,[t("div",O,[t("div",I,[M,p(g,{label:"mill_name",class:"w-100",modelValue:s.params.mill_id,"onUpdate:modelValue":i[0]||(i[0]=e=>s.params.mill_id=e),reduce:e=>e.id,options:s.mills,"onOption:selected":i[1]||(i[1]=e=>m.loadData())},null,8,["modelValue","reduce","options"])])]),t("div",F,[t("div",w,[N,p(g,{label:"name",class:"w-100",modelValue:s.params.group_id,"onUpdate:modelValue":i[2]||(i[2]=e=>s.params.group_id=e),options:s.stations,reduce:e=>e.id,"onOption:selected":i[3]||(i[3]=e=>m.loadData())},null,8,["modelValue","options","reduce"])])]),t("div",T,[t("div",L,[U,p(y,{modelValue:s.params.date,"onUpdate:modelValue":[i[4]||(i[4]=e=>s.params.date=e),m.changeDate],"enable-time-picker":!1,"auto-apply":""},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",E,[t("div",P,[B,p(g,{class:"w-100",options:s.parameters,modelValue:s.params.parameter,"onUpdate:modelValue":i[5]||(i[5]=e=>s.params.parameter=e),reduce:e=>e.value,"onOption:selected":m.selected},null,8,["options","modelValue","reduce","onOption:selected"])])])]),t("div",C,[t("div",z,[s.params.mill_id==999?(l(),a("table",A,[W,s.loading?u("",!0):(l(),a("tbody",H,[(l(!0),a(c,null,h(s.rows,(e,_)=>(l(),a("tr",null,[t("td",null,d(_+1),1),t("td",null,d(e.mill),1),t("td",null,d(e.threshold?e.threshold.toFixed(2):"")+" % "+d(s.parameter.label),1),(l(!0),a(c,null,h(e.data,o=>(l(),a("td",{class:v({red:o.result>e.threshold,"t-val":o.result})},d(o.result?o.result.toFixed(2):"")+d(o.result?`/(${o.count_file})`:""),3))),256)),t("td",null,d(e.total_sample),1),t("td",{class:v({red:e.today>e.threshold,"t-val":e.today})},d(e.today?e.today.toFixed(2):""),3)]))),256))])),s.loading?(l(),a("tbody",j,G)):u("",!0)])):(l(),a("table",J,[t("thead",null,[t("tr",null,[K,Q,R,t("th",{colspan:s.max,class:"c-val"},"  TIME SAMPLE",8,X),Y])]),s.loading?(l(),a("tbody",Z,[t("tr",null,[t("td",{colspan:s.max+4,style:{height:"400px"}},et,8,$)])])):u("",!0),s.loading?u("",!0):(l(),a("tbody",st,[(l(!0),a(c,null,h(s.rows,(e,_)=>(l(),a(c,{key:_},[t("tr",null,[t("td",lt,d(_+1),1),t("td",at,d(e.product_name),1),t("td",ot,d(e.threshold?e.threshold.toFixed(2):4 .toFixed(2))+"% "+d(s.parameter.label),1),(l(!0),a(c,null,h(e.data,(o,rt)=>(l(),a("td",{class:"c-val t-col",key:o.id},d(("0"+new Date(o.sample_date).getHours()).substr(-2))+":"+d(("0"+new Date(o.sample_date).getMinutes()).substr(-2)),1))),128)),e.data.length>0?(l(!0),a(c,{key:0},h(s.max-e.data.length,o=>(l(),a("td",{class:"c-val t-col",key:o}," "))),128)):u("",!0),t("td",null,d(e.data.length),1)]),t("tr",null,[(l(!0),a(c,null,h(e.data,o=>(l(),a("td",{class:v(["c-val t-val",{red:o[s.params.parameter]>=e.threshold}]),key:o.id},d(o[s.params.parameter].toFixed(2)),3))),128)),e.data.length>0?(l(!0),a(c,{key:0},h(s.max-e.data.length,o=>(l(),a("td",{class:"c-val",key:o}," "))),128)):u("",!0),t("td",{class:v(["c-val t-val",{red:e.avg>=e.threshold}])},d(e.avg.toFixed(2)),3)])],64))),128))]))]))])])])}const ut=S(V,[["render",nt],["__scopeId","data-v-c410e138"]]);export{ut as default};
