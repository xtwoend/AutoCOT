import{o as d,c as u,a as e,b as a,F as h,E as w,v as i,u as b,w as v,G as f,I as g,r as c}from"./vendor--BJOIQwQ.js";import{_ as V}from"./_plugin-vue_export-helper-x3n3nnut.js";const y={props:{title:String},data(){return{show:!1,row:{mill_id:4,group_id:null,parameter:null,threshold:null},rows:[],mills:[],groups:[],params:{},parameters:[{label:"Oil/WM",value:"owm"},{label:"VM",value:"vm"},{label:"Oil/DM",value:"odm"},{label:"NOS",value:"nos"}]}},async mounted(){this.getMills(),this.getGroups(),this.getData()},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(o=>o.data.data)},async getGroups(){this.groups=await this.$http.get("/fossnir/stations").then(o=>o.data.data)},async getData(){this.rows=[],(await this.$http.get("/threshold/thresholds",{params:this.row}).then(t=>t.data.data)).forEach(t=>this.rows.push(t))},edit(o){this.row=o,this.show=!0},del(o){if(confirm("Your sure!")==!0){this.$http.delete(`/threshold-delete/${o.id}`);let t=this.rows.findIndex(m=>m.id===o.id);this.rows.splice(t,1)}},async save(){this.row=await this.$http.post("/threshold/threshold-update",this.row).then(o=>o.data.data),await this.getData(),this.show=!1}}},k={class:"threshold-setting container mt-4"},C={class:"row"},x={class:"col-3"},M={class:"mb-3"},D=e("label",{class:"form-label"},"Mill",-1),S={class:"table table-sm table-striped table-hover"},U=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"MILL"),e("th",null,"Group"),e("th",null,"Parameter"),e("th",null,"Standart Value"),e("th")])],-1),E=["onClick"],G=["onClick"],N={class:"form-setting"},O={class:"mb-3"},B=e("label",{class:"form-label"},"Mill",-1),I={class:"mb-3"},L=e("label",{class:"form-label"},"Group",-1),A={class:"mb-3"},F=e("label",{class:"form-label"},"Parameter",-1),P={class:"mb-3"},T=e("label",{class:"form-label"},"Standart",-1),j={class:"mb-3 d-flex justify-content-end"};function W(o,t,m,Y,s,n){const r=c("v-select"),p=c("com-modal");return d(),u(h,null,[e("div",k,[e("div",C,[e("div",x,[e("div",M,[D,a(r,{label:"mill_name",class:"w-100",modelValue:s.row.mill_id,"onUpdate:modelValue":t[0]||(t[0]=l=>s.row.mill_id=l),reduce:l=>l.id,options:s.mills,"onOption:selected":t[1]||(t[1]=l=>n.getData())},null,8,["modelValue","reduce","options"])])])]),e("button",{class:"btn btn-success float-end",onClick:t[2]||(t[2]=l=>s.show=!0)},"Add New Standart"),e("table",S,[U,e("tbody",null,[(d(!0),u(h,null,w(s.rows,l=>(d(),u("tr",{key:l.id},[e("td",null,i(l.id),1),e("td",null,i(l.mill.mill_name),1),e("td",null,i(l.group.name),1),e("td",null,i(l.parameter),1),e("td",null,i(l.threshold),1),e("td",null,[e("a",{class:"pointer",onClick:_=>n.edit(l)},"Edit",8,E),b(" | "),e("a",{class:"pointer",onClick:_=>n.del(l)},"Del",8,G)])]))),128))])])]),a(p,{modelValue:s.show,"onUpdate:modelValue":t[9]||(t[9]=l=>s.show=l),header:"Add/Edit Standart",closeable:""},{default:v(()=>[e("div",N,[e("div",O,[B,a(r,{label:"mill_name",class:"w-100",modelValue:s.row.mill_id,"onUpdate:modelValue":t[3]||(t[3]=l=>s.row.mill_id=l),reduce:l=>l.id,options:s.mills},null,8,["modelValue","reduce","options"])]),e("div",I,[L,a(r,{label:"name",class:"w-100",modelValue:s.row.group_id,"onUpdate:modelValue":t[4]||(t[4]=l=>s.row.group_id=l),options:s.groups,reduce:l=>l.id},null,8,["modelValue","options","reduce"])]),e("div",A,[F,a(r,{class:"w-100",options:s.parameters,modelValue:s.row.parameter,"onUpdate:modelValue":t[5]||(t[5]=l=>s.row.parameter=l),reduce:l=>l.value},null,8,["options","modelValue","reduce"])]),e("div",P,[T,f(e("input",{class:"form-control",type:"number","onUpdate:modelValue":t[6]||(t[6]=l=>s.row.threshold=l)},null,512),[[g,s.row.threshold]])]),e("div",j,[e("button",{onClick:t[7]||(t[7]=l=>s.show=!1),class:"btn btn btn-outline-secondary mr2"},"Cancel"),e("button",{onClick:t[8]||(t[8]=(...l)=>n.save&&n.save(...l)),class:"btn btn-success"},"Save")])])]),_:1},8,["modelValue"])],64)}const H=V(y,[["render",W]]);export{H as default};
