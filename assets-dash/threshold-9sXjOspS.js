import{o as i,c as d,a as s,F as h,E as f,v as n,u as v,b as u,w as g,G as c,I as p,r as _}from"./vendor-k6VCZUst.js";import{_ as V}from"./_plugin-vue_export-helper-x3n3nnut.js";const x={props:{url:String,sensorUrl:String,groups:Array},data(){return{show:!1,row:{sensor_name:null,group:null,min:null,max:null},rows:[],sensors:[],params:{}}},async mounted(){this.getData(),this.sensors=await this.$http.get(this.sensorUrl).then(l=>l.data.data)},methods:{async getData(){this.rows=await this.$http.get(this.url,{params:this.params}).then(l=>l.data.data)},edit(l){this.row=l,this.show=!0},del(l){if(confirm("Your sure!")==!0){this.$http.delete(`/threshold/${l.id}`);let e=this.rows.findIndex(a=>a.id===l.id);this.rows.splice(e,1)}},async save(){this.row=await this.$http.post(this.url,this.row).then(l=>l.data.data),await this.getData(),this.show=!1}}},y={class:"threshold-setting container mt-4"},k={class:"table table-sm table-striped table-hover"},C=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Sensor Name"),s("th",null,"Group"),s("th",null,"MIN"),s("th",null,"MAX"),s("th")])],-1),N=["onClick"],U=["onClick"],D={class:"form-setting"},S={class:"mb-3"},A=s("label",{class:"form-label"},"Sensor Name",-1),M={class:"mb-3"},E=s("label",{class:"form-label"},"Group",-1),I={class:"mb-3"},T=s("label",{class:"form-label"},"MIN",-1),B={class:"mb-3"},G=s("label",{class:"form-label"},"MAX",-1),F={class:"mb-3 d-flex justify-content-end"};function X(l,e,a,j,o,r){const m=_("v-select"),b=_("com-modal");return i(),d(h,null,[s("div",y,[s("button",{class:"btn btn-success float-end",onClick:e[0]||(e[0]=t=>o.show=!0)},"Add New Threshold"),s("table",k,[C,s("tbody",null,[(i(!0),d(h,null,f(o.rows,t=>(i(),d("tr",{key:t.id},[s("td",null,n(t.id),1),s("td",null,n(t.sensor_name),1),s("td",null,n(t.group),1),s("td",null,n(t.min),1),s("td",null,n(t.max),1),s("td",null,[s("a",{class:"pointer",onClick:w=>r.edit(t)},"Edit",8,N),v(" | "),s("a",{class:"pointer",onClick:w=>r.del(t)},"Del",8,U)])]))),128))])])]),u(b,{modelValue:o.show,"onUpdate:modelValue":e[7]||(e[7]=t=>o.show=t),header:"Add/Edit Threshold",closeable:""},{default:g(()=>[s("div",D,[s("div",S,[A,u(m,{class:"w-100",modelValue:o.row.sensor_name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.row.sensor_name=t),options:o.sensors},null,8,["modelValue","options"])]),s("div",M,[E,u(m,{class:"w-100",modelValue:o.row.group,"onUpdate:modelValue":e[2]||(e[2]=t=>o.row.group=t),options:a.groups},null,8,["modelValue","options"])]),s("div",I,[T,c(s("input",{class:"form-control",type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>o.row.min=t)},null,512),[[p,o.row.min]])]),s("div",B,[G,c(s("input",{class:"form-control",type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>o.row.max=t)},null,512),[[p,o.row.max]])]),s("div",F,[s("button",{onClick:e[5]||(e[5]=t=>o.show=!1),class:"btn btn btn-outline-secondary mr2"},"Cancel"),s("button",{onClick:e[6]||(e[6]=(...t)=>r.save&&r.save(...t)),class:"btn btn-success"},"Save")])])]),_:1},8,["modelValue"])],64)}const q=V(x,[["render",X]]);export{q as default};
