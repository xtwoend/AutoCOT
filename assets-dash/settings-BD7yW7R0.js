import _ from"./Modal-UDhTmXyC.js";import{o as w,g as v,h as o,j as i,E as p,N as b,O as g,P as f,F as V,r as d,m as y,q as x}from"./vendor-053hF-fK.js";import{_ as P}from"./_plugin-vue_export-helper-x3n3nnut.js";const C={components:{Modal:_},data(){return{waiting:!1,show:!1,rows:[],stations:[],mills:[],row:{id:null,mill_id:null,parameter:null,std_value:0},headers:[{text:"Mill",value:"mill.mill_name"},{text:"Station",value:"product_name"},{text:"Parameter",value:"parameter"},{text:"Value",value:"std_value"},{text:"",value:"options"}],params:{mill_id:null,page:1,rowsPerPage:15,sortBy:"product_name",sortType:"asc"},total:0}},mounted(){this.loadData(),this.getMills()},watch:{params:{handler(t,s){this.params.page=t.page,this.params.rowsPerPage=t.rowsPerPage,this.params.sortBy=t.sortBy,this.params.sortType=t.sortType,this.params.mill_id=s.mill_id,this.loadData()},deep:!0}},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(t=>t.data.data)},async loadProducts(){this.row.hasOwnProperty("mill_id")&&(this.stations=await this.$http.get(`/std/oil/products/${this.row.mill_id}`).then(t=>t.data.data))},async loadData(){this.waiting=!0;let t=await this.$http.get("/std/oil/losses",{params:this.params}).then(s=>s.data);this.params.rowsPerPage=t.meta.per_page,this.params.page=t.meta.current_page,this.total=t.meta.total,this.rows=t.data,this.waiting=!1},edit(t){this.row=t,this.show=!0},del(t){if(confirm("Your sure!")==!0){this.$http.delete(`/std/oil/losses/${t.id}`);let s=this.rows.findIndex(m=>m.id===t.id);this.rows.splice(s,1)}},showRow(t){console.log(t)},async save(){this.row=await this.$http.post("/std/oil/losses",this.row).then(t=>t.data.data),await this.loadData(),this.show=!1}}},n=t=>(y("data-v-75e4f1aa"),t=t(),x(),t),M={class:"master-table mt-3"},k={class:"row"},O={class:"col-4"},S={class:"mb-3"},D=n(()=>o("label",{class:"form-label"},"Mill",-1)),T={class:"col-8"},U={class:"mb-3 d-flex justify-content-end align-items-end"},B={class:"table"},E=["onClick"],N=["onClick"],I={class:"form-setting"},R={class:"mb-3"},j=n(()=>o("label",{class:"form-label"},"Mill",-1)),F={class:"mb-3"},q=n(()=>o("label",{class:"form-label"},"Station",-1)),A={class:"mb-3"},W=n(()=>o("label",{class:"form-label"},"Parameter",-1)),Y={class:"mb-3"},z=n(()=>o("label",{class:"form-label"},"Parameter",-1)),G={class:"mb-3 d-flex justify-content-end"};function H(t,s,m,J,l,a){const r=d("v-select"),u=d("EasyDataTable"),c=d("Modal");return w(),v(V,null,[o("div",M,[o("div",k,[o("div",O,[o("div",S,[D,i(r,{label:"mill_name",class:"w-100",modelValue:l.params.mill_id,"onUpdate:modelValue":s[0]||(s[0]=e=>l.params.mill_id=e),reduce:e=>e.id,options:l.mills},null,8,["modelValue","reduce","options"])])]),o("div",T,[o("div",U,[o("button",{class:"btn btn-primary",onClick:s[1]||(s[1]=e=>l.show=!0)},"Create New Standart")])])]),o("div",B,[i(u,{"server-options":l.params,"onUpdate:serverOptions":s[2]||(s[2]=e=>l.params=e),"server-items-length":l.total,loading:l.waiting,headers:l.headers,items:l.rows,onClickRow:a.showRow,"rows-items":[15,25,50,100],"show-index":""},{"item-options":p(e=>[o("a",{class:"pointer",onClick:h=>a.edit(e)},"Edit",8,E),b(" | "),o("a",{class:"pointer",onClick:h=>a.del(e)},"Del",8,N)]),_:1},8,["server-options","server-items-length","loading","headers","items","onClickRow"])])]),i(c,{modelValue:l.show,"onUpdate:modelValue":s[12]||(s[12]=e=>l.show=e),header:"Add/Edit Oil Standart Settings",closeable:""},{default:p(()=>[o("div",I,[o("div",R,[j,i(r,{label:"mill_name",modelValue:l.row.mill_id,"onUpdate:modelValue":s[3]||(s[3]=e=>l.row.mill_id=e),class:"w-100",options:l.mills,reduce:e=>e.id,"onOption:selected":s[4]||(s[4]=e=>a.loadProducts())},null,8,["modelValue","options","reduce"])]),o("div",F,[q,i(r,{class:"w-100",taggable:"",label:"product_name",modelValue:l.row.product_name,"onUpdate:modelValue":s[5]||(s[5]=e=>l.row.product_name=e),options:l.stations,"onOption:selected":s[6]||(s[6]=e=>l.row.product_name=e)},null,8,["modelValue","options"])]),o("div",A,[W,i(r,{class:"w-100",taggable:"",modelValue:l.row.parameter,"onUpdate:modelValue":s[7]||(s[7]=e=>l.row.parameter=e),options:["Oil/WM","VM","Oil/DM","NOS"],"onOption:selected":s[8]||(s[8]=e=>l.row.parameter=e)},null,8,["modelValue"])]),o("div",Y,[z,g(o("input",{class:"form-control",type:"number",step:"0.01","onUpdate:modelValue":s[9]||(s[9]=e=>l.row.std_value=e)},null,512),[[f,l.row.std_value]])]),o("div",G,[o("button",{onClick:s[10]||(s[10]=e=>l.show=!1),class:"btn btn btn-outline-secondary mr2"},"Cancel"),o("button",{onClick:s[11]||(s[11]=(...e)=>a.save&&a.save(...e)),class:"btn btn-success"},"Save")])])]),_:1},8,["modelValue"])],64)}const X=P(C,[["render",H],["__scopeId","data-v-75e4f1aa"]]);export{X as default};
