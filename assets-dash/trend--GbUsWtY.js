import{r as b,o,c as n,a as t,b as p,F as c,E as m,t as d,n as _,u as g,y as f,z as S}from"./vendor-_TY6xysw.js";import{_ as V}from"./_plugin-vue_export-helper-x3n3nnut.js";const D={data(){return{mills:[],parameter:{label:"Oil/WM",value:"owm"},params:{mill_id:999,parameter:"owm",date:new Date().toISOString().slice(0,10),group_id:4},rows:[],max:15,stations:[],parameters:[{label:"Oil/WM",value:"owm"},{label:"VM",value:"vm"},{label:"Oil/DM",value:"odm"},{label:"NOS",value:"nos"}]}},mounted(){this.getStations(),this.loadData(),this.getMills()},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(a=>a.data.data)},async getStations(){this.stations=await this.$http.get("/fossnir/stations").then(a=>a.data.data)},changeDate(a){this.params.date=a.toISOString().slice(0,10),this.$root.date=a.toISOString().slice(0,10),this.loadData()},selected(a){this.parameter=a,this.loadData()},async loadData(){if(this.params.lenght<2)return;let a=await this.$http.get("/fossnir/data",{params:this.params}).then(r=>r.data);this.rows=a.data,a.meta&&(this.max=a.meta.max)}}},i=a=>(f("data-v-ef60437f"),a=a(),S(),a),x={class:"mt-3"},k={class:"row"},O={class:"col-3"},I={class:"mb-3"},M=i(()=>t("label",{class:"form-label"},"Mill",-1)),F={class:"col-3"},w={class:"mb-3"},N=i(()=>t("label",{class:"form-label"},"OIL IN",-1)),T={class:"col-3"},L={class:"mb-3"},U=i(()=>t("label",{class:"form-label"},"Date",-1)),E={class:"col-3"},P={class:"mb-3"},B=i(()=>t("label",{class:"form-label"},"Parameters",-1)),C={class:"row"},z={class:"col"},A={key:0,class:"table table-sm history"},W=i(()=>t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"MILL"),t("th",null,"STD"),t("th",{class:"c-val"},"07:00"),t("th",{class:"c-val"},"09:00"),t("th",{class:"c-val"},"11:00"),t("th",{class:"c-val"},"13:00"),t("th",{class:"c-val"},"15:00"),t("th",{class:"c-val"},"17:00"),t("th",{class:"c-val"},"19:00"),t("th",{class:"c-val"},"21:00"),t("th",{class:"c-val"},"23:00"),t("th",{class:"c-val"},"01:00"),t("th",{class:"c-val"},"03:00"),t("th",{class:"c-val"},"05:00"),t("th",null,"Sample"),t("th",null,"Today")])],-1)),H={key:1,class:"table table-sm history"},j=i(()=>t("th",null,"No",-1)),q=i(()=>t("th",{class:"station"},"STATION",-1)),G=i(()=>t("th",null,"STD",-1)),J=["colspan"],K=i(()=>t("th",null,"Total Sample",-1)),Q={rowspan:"2"},R={rowspan:"2",class:"txt-left"},X={rowspan:"2"};function Y(a,r,Z,$,l,u){const v=b("v-select"),y=b("VueDatePicker");return o(),n("div",x,[t("div",k,[t("div",O,[t("div",I,[M,p(v,{label:"mill_name",class:"w-100",modelValue:l.params.mill_id,"onUpdate:modelValue":r[0]||(r[0]=e=>l.params.mill_id=e),reduce:e=>e.id,options:l.mills,"onOption:selected":r[1]||(r[1]=e=>u.loadData())},null,8,["modelValue","reduce","options"])])]),t("div",F,[t("div",w,[N,p(v,{label:"name",class:"w-100",modelValue:l.params.group_id,"onUpdate:modelValue":r[2]||(r[2]=e=>l.params.group_id=e),options:l.stations,reduce:e=>e.id,"onOption:selected":r[3]||(r[3]=e=>u.loadData())},null,8,["modelValue","options","reduce"])])]),t("div",T,[t("div",L,[U,p(y,{modelValue:l.params.date,"onUpdate:modelValue":[r[4]||(r[4]=e=>l.params.date=e),u.changeDate],"enable-time-picker":!1,"auto-apply":""},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",E,[t("div",P,[B,p(v,{class:"w-100",options:l.parameters,modelValue:l.params.parameter,"onUpdate:modelValue":r[5]||(r[5]=e=>l.params.parameter=e),reduce:e=>e.value,"onOption:selected":u.selected},null,8,["options","modelValue","reduce","onOption:selected"])])])]),t("div",C,[t("div",z,[l.params.mill_id==999?(o(),n("table",A,[W,t("tbody",null,[(o(!0),n(c,null,m(l.rows,(e,h)=>(o(),n("tr",null,[t("td",null,d(h+1),1),t("td",null,d(e.mill),1),t("td",null,d(e.threshold?e.threshold.toFixed(2):"")+" % "+d(l.parameter.label),1),(o(!0),n(c,null,m(e.data,s=>(o(),n("td",{class:_({red:s.result>e.threshold,"t-val":s.result})},d(s.result?s.result.toFixed(2):"")+d(s.result?`/(${s.count_file})`:""),3))),256)),t("td",null,d(e.total_sample),1),t("td",{class:_({red:e.today>e.threshold,"t-val":e.today})},d(e.today?e.today.toFixed(2):""),3)]))),256))])])):(o(),n("table",H,[t("thead",null,[t("tr",null,[j,q,G,t("th",{colspan:l.max,class:"c-val"},"  TIME SAMPLE",8,J),K])]),t("tbody",null,[(o(!0),n(c,null,m(l.rows,(e,h)=>(o(),n(c,{key:h},[t("tr",null,[t("td",Q,d(h+1),1),t("td",R,d(e.product_name),1),t("td",X,d(e.threshold?e.threshold.toFixed(2):4 .toFixed(2))+"% "+d(l.parameter.label),1),(o(!0),n(c,null,m(e.data,(s,tt)=>(o(),n("td",{class:"c-val t-col",key:s.id},d(("0"+new Date(s.sample_date).getHours()).substr(-2))+":"+d(("0"+new Date(s.sample_date).getMinutes()).substr(-2)),1))),128)),e.data.length>0?(o(!0),n(c,{key:0},m(l.max-e.data.length,s=>(o(),n("td",{class:"c-val t-col",key:s}," "))),128)):g("",!0),t("td",null,d(e.data.length),1)]),t("tr",null,[(o(!0),n(c,null,m(e.data,s=>(o(),n("td",{class:_(["c-val t-val",{red:s[l.params.parameter]>=e.threshold}]),key:s.id},d(s[l.params.parameter].toFixed(2)),3))),128)),e.data.length>0?(o(!0),n(c,{key:0},m(l.max-e.data.length,s=>(o(),n("td",{class:"c-val",key:s}," "))),128)):g("",!0),t("td",{class:_(["c-val t-val",{red:e.avg>=e.threshold}])},d(e.avg.toFixed(2)),3)])],64))),128))])]))])])])}const st=V(D,[["render",Y],["__scopeId","data-v-ef60437f"]]);export{st as default};
