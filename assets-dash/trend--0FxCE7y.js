import{r as y,o as l,c as a,a as t,b as p,v as i,x as h,F as c,E as u,n as v,A as f,B as S}from"./vendor-k6VCZUst.js";import{_ as k}from"./_plugin-vue_export-helper-x3n3nnut.js";const V={data(){return{mills:[],parameter:{label:"Oil/WM",value:"owm"},params:{mill_id:999,parameter:"owm",date:new Date().toISOString().slice(0,10),group_id:4},rows:[],max:15,stations:[],parameters:[{label:"Oil/WM",value:"owm"},{label:"VM",value:"vm"},{label:"Oil/DM",value:"odm"},{label:"NOS",value:"nos"}],loading:!1}},mounted(){this.getStations(),this.loadData(),this.getMills()},methods:{async getMills(){this.mills=await this.$http.get("/fossnir/mills").then(o=>o.data.data)},async getStations(){this.stations=await this.$http.get("/fossnir/stations").then(o=>o.data.data)},changeDate(o){this.params.date=o.toISOString().slice(0,10),this.$root.date=o.toISOString().slice(0,10),this.loadData()},selected(o){this.parameter=o,this.loadData()},async loadData(){if(this.loading=!0,this.params.lenght<2)return;let o=await this.$http.get("/fossnir/data",{params:this.params}).then(d=>d.data);this.rows=o.data,o.meta&&(this.max=o.meta.max),this.loading=!1},getStationName(o){let d=this.stations.findIndex(b=>b.id==o);return this.stations[d]}}},r=o=>(f("data-v-82464436"),o=o(),S(),o),D={class:"mt-3"},I={class:"row"},O={class:"col-3"},M={class:"mb-3"},N=r(()=>t("label",{class:"form-label"},"Mill",-1)),w={class:"col-3"},F={class:"mb-3"},T=r(()=>t("label",{class:"form-label"},"OIL IN",-1)),L={class:"col-3"},U={class:"mb-3"},B=r(()=>t("label",{class:"form-label"},"Date",-1)),E={class:"col-3"},P={class:"mb-3"},A=r(()=>t("label",{class:"form-label"},"Parameters",-1)),C={class:"row mb-2"},W={class:"col"},z={class:"info-station"},H={key:0},j={class:"row"},q={class:"col"},G={key:0,class:"table table-sm history"},J=r(()=>t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"MILL"),t("th",null,"STD"),t("th",{class:"c-val"},"07:00"),t("th",{class:"c-val"},"09:00"),t("th",{class:"c-val"},"11:00"),t("th",{class:"c-val"},"13:00"),t("th",{class:"c-val"},"15:00"),t("th",{class:"c-val"},"17:00"),t("th",{class:"c-val"},"19:00"),t("th",{class:"c-val"},"21:00"),t("th",{class:"c-val"},"23:00"),t("th",{class:"c-val"},"01:00"),t("th",{class:"c-val"},"03:00"),t("th",{class:"c-val"},"05:00"),t("th",null,"Sample"),t("th",null,"Today")])],-1)),K={key:0},Q={key:1},R=r(()=>t("tr",null,[t("td",{colspan:"17",style:{height:"400px"}},[t("div",{class:"text-center"},[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])])],-1)),X=[R],Y={key:1,class:"table table-sm history"},Z=r(()=>t("th",null,"No",-1)),$=r(()=>t("th",{class:"station"},"STATION",-1)),tt=r(()=>t("th",null,"STD",-1)),et=["colspan"],st=r(()=>t("th",null,"Total Sample",-1)),lt={key:0},at=["colspan"],ot=r(()=>t("div",{class:"text-center"},[t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])],-1)),nt=[ot],it={key:1},dt={rowspan:"2"},rt={rowspan:"2",class:"txt-left"},ct={rowspan:"2"};function ht(o,d,b,ut,s,m){const g=y("v-select"),x=y("VueDatePicker");return l(),a("div",D,[t("div",I,[t("div",O,[t("div",M,[N,p(g,{label:"mill_name",class:"w-100",modelValue:s.params.mill_id,"onUpdate:modelValue":d[0]||(d[0]=e=>s.params.mill_id=e),reduce:e=>e.id,options:s.mills,"onOption:selected":d[1]||(d[1]=e=>m.loadData())},null,8,["modelValue","reduce","options"])])]),t("div",w,[t("div",F,[T,p(g,{label:"name",class:"w-100",modelValue:s.params.group_id,"onUpdate:modelValue":d[2]||(d[2]=e=>s.params.group_id=e),options:s.stations,reduce:e=>e.id,"onOption:selected":d[3]||(d[3]=e=>m.loadData())},null,8,["modelValue","options","reduce"])])]),t("div",L,[t("div",U,[B,p(x,{modelValue:s.params.date,"onUpdate:modelValue":[d[4]||(d[4]=e=>s.params.date=e),m.changeDate],"enable-time-picker":!1,"auto-apply":""},null,8,["modelValue","onUpdate:modelValue"])])]),t("div",E,[t("div",P,[A,p(g,{class:"w-100",options:s.parameters,modelValue:s.params.parameter,"onUpdate:modelValue":d[5]||(d[5]=e=>s.params.parameter=e),reduce:e=>e.value,"onOption:selected":m.selected},null,8,["options","modelValue","reduce","onOption:selected"])])])]),t("div",C,[t("div",W,[t("div",z,[s.stations.length>0?(l(),a("span",H,[t("h3",null,i(m.getStationName(s.params.group_id).name),1)])):h("",!0)])])]),t("div",j,[t("div",q,[s.params.mill_id==999?(l(),a("table",G,[J,s.loading?h("",!0):(l(),a("tbody",K,[(l(!0),a(c,null,u(s.rows,(e,_)=>(l(),a("tr",null,[t("td",null,i(_+1),1),t("td",null,i(e.mill),1),t("td",null,i(e.threshold?e.threshold.toFixed(2):"")+" % "+i(s.parameter.label),1),(l(!0),a(c,null,u(e.data,n=>(l(),a("td",{class:v({red:n.result>e.threshold,"t-val":n.result})},i(n.result?n.result.toFixed(2):"")+i(n.result?`/(${n.count_file})`:""),3))),256)),t("td",null,i(e.total_sample),1),t("td",{class:v({red:e.today>e.threshold,"t-val":e.today})},i(e.today?e.today.toFixed(2):""),3)]))),256))])),s.loading?(l(),a("tbody",Q,X)):h("",!0)])):(l(),a("table",Y,[t("thead",null,[t("tr",null,[Z,$,tt,t("th",{colspan:s.max,class:"c-val"},"  TIME SAMPLE",8,et),st])]),s.loading?(l(),a("tbody",lt,[t("tr",null,[t("td",{colspan:s.max+4,style:{height:"400px"}},nt,8,at)])])):h("",!0),s.loading?h("",!0):(l(),a("tbody",it,[(l(!0),a(c,null,u(s.rows,(e,_)=>(l(),a(c,{key:_},[t("tr",null,[t("td",dt,i(_+1),1),t("td",rt,i(e.product_name),1),t("td",ct,i(e.threshold?e.threshold.toFixed(2):4 .toFixed(2))+"% "+i(s.parameter.label),1),(l(!0),a(c,null,u(e.data,(n,mt)=>(l(),a("td",{class:"c-val t-col",key:n.id},i(("0"+new Date(n.sample_date).getHours()).substr(-2))+":"+i(("0"+new Date(n.sample_date).getMinutes()).substr(-2)),1))),128)),e.data.length>0?(l(!0),a(c,{key:0},u(s.max-e.data.length,n=>(l(),a("td",{class:"c-val t-col",key:n}," "))),128)):h("",!0),t("td",null,i(e.data.length),1)]),t("tr",null,[(l(!0),a(c,null,u(e.data,n=>(l(),a("td",{class:v(["c-val t-val",{red:n[s.params.parameter]>=e.threshold}]),key:n.id},i(n[s.params.parameter].toFixed(2)),3))),128)),e.data.length>0?(l(!0),a(c,{key:0},u(s.max-e.data.length,n=>(l(),a("td",{class:"c-val",key:n}," "))),128)):h("",!0),t("td",{class:v(["c-val t-val",{red:e.avg>=e.threshold}])},i(e.avg.toFixed(2)),3)])],64))),128))]))]))])])])}const vt=k(V,[["render",ht],["__scopeId","data-v-82464436"]]);export{vt as default};
